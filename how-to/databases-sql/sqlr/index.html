<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-how-to/databases-sql/sqlr" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>sqlr - SQL Repository | Gosoline Docs</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:image content=https://gosoline-project.github.io/docs/img/gosoline-social-card.png /><meta data-rh=true name=twitter:image content=https://gosoline-project.github.io/docs/img/gosoline-social-card.png /><meta data-rh=true property=og:url content=https://gosoline-project.github.io/docs/how-to/databases-sql/sqlr /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-default-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current /><meta data-rh=true property=og:title content="sqlr - SQL Repository | Gosoline Docs"/><meta data-rh=true name=description content="The sqlr package provides a generic, type-safe repository layer built on top of sqlc. It offers CRUD operations, relationship management, eager loading via joins and preloads, and transaction support — all using Go generics for compile-time type safety."/><meta data-rh=true property=og:description content="The sqlr package provides a generic, type-safe repository layer built on top of sqlc. It offers CRUD operations, relationship management, eager loading via joins and preloads, and transaction support — all using Go generics for compile-time type safety."/><link data-rh=true rel=icon href=/docs/img/logo-dark.png /><link data-rh=true rel=canonical href=https://gosoline-project.github.io/docs/how-to/databases-sql/sqlr /><link data-rh=true rel=alternate href=https://gosoline-project.github.io/docs/how-to/databases-sql/sqlr hreflang=en /><link data-rh=true rel=alternate href=https://gosoline-project.github.io/docs/how-to/databases-sql/sqlr hreflang=x-default /><link data-rh=true rel=preconnect href=https://ER8OFD58GM-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://gosoline-project.github.io/docs/category/how-to-guides","name":"How-to guides","position":1},{"@type":"ListItem","item":"https://gosoline-project.github.io/docs/how-to/databases-sql/","name":"Relational databases","position":2},{"@type":"ListItem","item":"https://gosoline-project.github.io/docs/how-to/databases-sql/sqlr","name":"sqlr - SQL Repository","position":3}]}</script><link rel=alternate type=application/rss+xml href=/docs/blog/rss.xml title="Gosoline Docs RSS Feed"><link rel=alternate type=application/atom+xml href=/docs/blog/atom.xml title="Gosoline Docs Atom Feed"><link rel=search type=application/opensearchdescription+xml title="Gosoline Docs" href=/docs/opensearch.xml><link rel=stylesheet href=/docs/assets/css/styles.36a43f55.css /><script src=/docs/assets/js/runtime~main.9acf2a37.js defer></script><script src=/docs/assets/js/main.c1782617.js defer></script></head><body class=navigation-with-keyboard><svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/docs/img/logo-transparent.png /><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/docs/><div class=navbar__logo><img src=/docs/img/logo-transparent.png alt="justtrack Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/docs/img/logo-transparent.png alt="justtrack Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div><b class="navbar__title text--truncate">Gosoline</b></a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/docs/>Docs</a><a class="navbar__item navbar__link" href=/docs/blog>Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/gosoline-project/docs target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/docs/><span title=Overview class=linkLabel_WmDU>Overview</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/fundamentals><span title=Fundamentals class=categoryLinkLabel_W154>Fundamentals</span></a><button aria-label="Expand sidebar category 'Fundamentals'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/getting-started><span title="Getting started" class=categoryLinkLabel_W154>Getting started</span></a><button aria-label="Expand sidebar category 'Getting started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href=/docs/category/how-to-guides><span title="How-to guides" class=categoryLinkLabel_W154>How-to guides</span></a><button aria-label="Collapse sidebar category 'How-to guides'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/how-to/configure-your-httpserver><span title="Configure your HTTP servers" class=linkLabel_WmDU>Configure your HTTP servers</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/how-to/load-configs><span title="Load configurations" class=linkLabel_WmDU>Load configurations</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/how-to/logging/use-loggers><span title=Logging class=categoryLinkLabel_W154>Logging</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/docs/how-to/databases-sql/><span title="Relational databases" class=categoryLinkLabel_W154>Relational databases</span></a><button aria-label="Collapse sidebar category 'Relational databases'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/how-to/databases-sql/sqlc><span title="sqlc - SQL Client" class=linkLabel_WmDU>sqlc - SQL Client</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/docs/how-to/databases-sql/sqlr><span title="sqlr - SQL Repository" class=linkLabel_WmDU>sqlr - SQL Repository</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/docs/how-to/databases-sql/sqlh><span title="sqlh - SQL HTTP Handlers" class=linkLabel_WmDU>sqlh - SQL HTTP Handlers</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/how-to/kafka/general><span title=Kafka class=categoryLinkLabel_W154>Kafka</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/docs/how-to/sampling/use-sampling><span title=Sampling class=categoryLinkLabel_W154>Sampling</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/docs/how-to/write-health-checks><span title="Implement health checks" class=linkLabel_WmDU>Implement health checks</span></a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/reference><span title=Reference class=categoryLinkLabel_W154>Reference</span></a><button aria-label="Expand sidebar category 'Reference'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/docs/category/migrations><span title=Migrations class=categoryLinkLabel_W154>Migrations</span></a><button aria-label="Expand sidebar category 'Migrations'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/docs/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/category/how-to-guides><span>How-to guides</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/docs/how-to/databases-sql/><span>Relational databases</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>sqlr - SQL Repository</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>sqlr - SQL Repository</h1></header><p>The <code>sqlr</code> package provides a generic, type-safe repository layer built on top of <a class="" href=/docs/how-to/databases-sql/sqlc><code>sqlc</code></a>. It offers CRUD operations, relationship management, eager loading via joins and preloads, and transaction support — all using Go generics for compile-time type safety.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=getting-started>Getting Started<a href=#getting-started class=hash-link aria-label="Direct link to Getting Started" title="Direct link to Getting Started" translate=no>​</a></h2>
<p>Add the dependency to your Go module:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">go get github.com/gosoline-project/sqlr@v0.2.0</span><br/></span></code></pre></div></div>
<p>Then import the package in your Go code:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"github.com/gosoline-project/sqlr"</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=configuration>Configuration<a href=#configuration class=hash-link aria-label="Direct link to Configuration" title="Direct link to Configuration" translate=no>​</a></h2>
<p>The <code>sqlr</code> package uses <code>sqlc</code> under the hood for database connections. Configure your database using the same <code>sqlc</code> configuration key described in the <a class="" href=/docs/how-to/databases-sql/sqlc#configuration>sqlc documentation</a>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>config.dist.yml</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token key atrule" style=color:#00a4db>sqlc</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token key atrule" style=color:#00a4db>default</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>driver</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> mysql</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>uri</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>host</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> 127.0.0.1</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>port</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3306</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>user</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> root</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>password</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> gosoline</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>database</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> blog</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token key atrule" style=color:#00a4db>migrations</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>enabled</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> </span><span class="token boolean important" style=color:#36acaa>true</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token key atrule" style=color:#00a4db>path</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> migrations</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=defining-entities>Defining Entities<a href=#defining-entities class=hash-link aria-label="Direct link to Defining Entities" title="Direct link to Defining Entities" translate=no>​</a></h2>
<p>Entities are Go structs that map to database tables. Embed <code>sqlr.Entity[K]</code> to get a primary key (<code>Id</code>), and automatic timestamp fields (<code>CreatedAt</code>, <code>UpdatedAt</code>):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Name  </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Email </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Posts </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post </span><span class="token comment" style=color:#999988;font-style:italic>// HasMany</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  AuthorID </span><span class="token builtin">int64</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Title    </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Body     </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Status   </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Author   Author </span><span class="token string" style=color:#e3116c>`db:"-,belongsTo:author_id"`</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// BelongsTo</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Tags     </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Tag  </span><span class="token string" style=color:#e3116c>`db:"-,many2many:"`</span><span class="token plain">          </span><span class="token comment" style=color:#999988;font-style:italic>// ManyToMany</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Tag </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  Name </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=entity-base-struct>Entity Base Struct<a href=#entity-base-struct class=hash-link aria-label="Direct link to Entity Base Struct" title="Direct link to Entity Base Struct" translate=no>​</a></h3>
<p>The <code>sqlr.Entity[K]</code> base struct provides:</p>
<table><thead><tr><th>Field<th>Tag<th>Description<tbody><tr><td><code>Id</code><td><code>db:"id,primaryKey"</code><td>Primary key, auto-increment for integer types<tr><td><code>CreatedAt</code><td><code>db:"created_at,autoCreateTime"</code><td>Set automatically on insert<tr><td><code>UpdatedAt</code><td><code>db:"updated_at,autoUpdateTime"</code><td>Set automatically on insert and update</table>
<p>All entities must implement the <code>Entitier[K]</code> interface (satisfied automatically by embedding <code>Entity[K]</code>):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Entitier</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">K KeyTypes</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>GetId</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> K</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>GetUpdatedAt</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Time</span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>GetCreatedAt</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> time</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Time</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=struct-tags>Struct Tags<a href=#struct-tags class=hash-link aria-label="Direct link to Struct Tags" title="Direct link to Struct Tags" translate=no>​</a></h3>
<p>Column mappings and behavior are controlled via the <code>db</code> struct tag. The <code>db</code> tag is <strong>optional</strong> for public fields — when omitted, the field name is converted to a column name using <a href=#schemanametransformer class=""><code>SchemaNameTransformer</code></a> (default: snake_case). Public struct and slice-of-struct fields without a <code>db</code> tag are auto-detected as relationships (see <a href=#auto-detected-relationships class="">Auto-detected Relationships</a>). To explicitly exclude a public field from all mapping, use <code>db:"-"</code> (without any options after the comma).</p>
<table><thead><tr><th>Tag<th>Description<tbody><tr><td><code>db:"column_name"</code><td>Maps the field to a database column<tr><td><code>db:"column_name,primaryKey"</code><td>Marks the field as the primary key<tr><td><code>db:"column_name,autoCreateTime"</code><td>Auto-sets the field to <code>time.Now()</code> on insert<tr><td><code>db:"column_name,autoUpdateTime"</code><td>Auto-sets the field to <code>time.Now()</code> on insert and update<tr><td><code>db:"-,foreignKey:col"</code><td>Defines a HasOne or HasMany relationship (see <a href=#relationships class="">Relationships</a>)<tr><td><code>db:"-,belongsTo:col"</code><td>Defines a BelongsTo relationship<tr><td><code>db:"-,many2many:table"</code><td>Defines a ManyToMany relationship<tr><td><code>db:"-,many2many:table,parentKey:col"</code><td>Overrides the join table column that references the parent entity's PK<tr><td><code>db:"-,many2many:table,relatedKey:col"</code><td>Overrides the join table column that references the related entity's PK<tr><td><code>db:"-"</code><td>Explicitly excludes a public field from column and relationship mapping</table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=excluding-fields>Excluding Fields<a href=#excluding-fields class=hash-link aria-label="Direct link to Excluding Fields" title="Direct link to Excluding Fields" translate=no>​</a></h3>
<p>To exclude a public field from all mapping (no column, no relationship), use <code>db:"-"</code>:</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=table-name-derivation>Table Name Derivation<a href=#table-name-derivation class=hash-link aria-label="Direct link to Table Name Derivation" title="Direct link to Table Name Derivation" translate=no>​</a></h3>
<p>Table names are automatically derived from the struct type name by applying <a href=#schemanametransformer class=""><code>SchemaNameTransformer</code></a> (default: snake_case conversion) and then pluralizing:</p>
<table><thead><tr><th>Struct Name<th>Table Name<tbody><tr><td><code>Author</code><td><code>authors</code><tr><td><code>Post</code><td><code>posts</code><tr><td><code>PostTag</code><td><code>posts_tags</code></table>
<p>To override the default table name, implement the <code>TableNamer</code> interface:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> TableNamer </span><span class="token keyword" style=color:#00009f>interface</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>TableName</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a Author</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>TableName</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"my_authors"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=schemanametransformer>SchemaNameTransformer<a href=#schemanametransformer class=hash-link aria-label="Direct link to SchemaNameTransformer" title="Direct link to SchemaNameTransformer" translate=no>​</a></h3>
<p><code>SchemaNameTransformer</code> is a package-level variable that controls how Go field names and type names are converted to database identifiers. It is used for:</p>
<ul>
<li class="">Deriving column names for untagged public fields</li>
<li class="">Deriving table names from struct type names (before pluralization)</li>
<li class="">Deriving foreign key column names for auto-detected relationships</li>
<li class="">Deriving join table column names for ManyToMany relationships when no <code>parentKey:</code>/<code>relatedKey:</code> override is set</li>
</ul>
<p>The default transformer is <code>toSnakeCase</code> (PascalCase/camelCase → snake_case). You can replace it at program startup before any repository is created:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>import</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"strings"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token string" style=color:#e3116c>"github.com/gosoline-project/sqlr"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>init</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Use lowercase field names instead of snake_case</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">SchemaNameTransformer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> strings</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">ToLower</span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>The transformer must be set <strong>before</strong> any repository or schema parsing occurs, as schemas are cached after first use.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=supported-key-types>Supported Key Types<a href=#supported-key-types class=hash-link aria-label="Direct link to Supported Key Types" title="Direct link to Supported Key Types" translate=no>​</a></h3>
<p>Primary keys can be any of these types (or their pointer variants):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token builtin">bool</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">uint</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">uint64</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">float32</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> </span><span class="token builtin">float64</span><br/></span></code></pre></div></div>
<p>Integer primary key types (<code>int</code>, <code>int64</code>, <code>uint</code>, <code>uint64</code>) are automatically treated as auto-increment — they are excluded from INSERT statements and their value is set from <code>LastInsertId()</code> after creation.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=relationships>Relationships<a href=#relationships class=hash-link aria-label="Direct link to Relationships" title="Direct link to Relationships" translate=no>​</a></h2>
<p>Relationships can be declared in two ways: via <strong>auto-detection</strong> of untagged public fields (convention over configuration) or via <strong>explicit <code>db</code> struct tags</strong> (full control over every name).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=hasone>HasOne<a href=#hasone class=hash-link aria-label="Direct link to HasOne" title="Direct link to HasOne" translate=no>​</a></h3>
<p>The foreign key lives on the <strong>related</strong> table and the field type is a single struct. HasOne cannot be auto-detected — a non-slice struct field with no <code>db</code> tag is always treated as BelongsTo instead. An explicit <code>foreignKey:</code> tag is always required.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=explicit-tag>Explicit Tag<a href=#explicit-tag class=hash-link aria-label="Direct link to Explicit Tag" title="Direct link to Explicit Tag" translate=no>​</a></h4>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name    </span><span class="token builtin">string</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Profile Profile </span><span class="token string" style=color:#e3116c>`db:"-,foreignKey:author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Profile </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Bio      </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"bio"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Table schema</summary><div><div class=collapsibleContent_i85q><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> authors </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    name       </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> profiles </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    author_id  </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    bio        </span><span class="token keyword" style=color:#00009f>TEXT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">author_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> authors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=hasmany>HasMany<a href=#hasmany class=hash-link aria-label="Direct link to HasMany" title="Direct link to HasMany" translate=no>​</a></h3>
<p>The foreign key lives on the <strong>related</strong> table and the field type is a slice.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=auto-detected>Auto-detected<a href=#auto-detected class=hash-link aria-label="Direct link to Auto-detected" title="Direct link to Auto-detected" translate=no>​</a></h4>
<p>A public slice-of-struct field with no <code>db</code> tag is automatically treated as HasMany. The foreign key column name on the related table is derived as <code>SchemaNameTransformer(parentTypeName) + "_id"</code>.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Posts </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post </span><span class="token comment" style=color:#999988;font-style:italic>// FK "author_id" derived on posts table</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title    </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=explicit-tag-1>Explicit Tag<a href=#explicit-tag-1 class=hash-link aria-label="Direct link to Explicit Tag" title="Direct link to Explicit Tag" translate=no>​</a></h4>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name  </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Posts </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post </span><span class="token string" style=color:#e3116c>`db:"-,foreignKey:author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title    </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"title"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Table schema</summary><div><div class=collapsibleContent_i85q><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> authors </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    name       </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> posts </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    author_id  </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    title      </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">author_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> authors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=belongsto>BelongsTo<a href=#belongsto class=hash-link aria-label="Direct link to BelongsTo" title="Direct link to BelongsTo" translate=no>​</a></h3>
<p>The foreign key lives on the <strong>current</strong> entity's table.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=auto-detected-1>Auto-detected<a href=#auto-detected-1 class=hash-link aria-label="Direct link to Auto-detected" title="Direct link to Auto-detected" translate=no>​</a></h4>
<p>A public non-slice struct field with no <code>db</code> tag (whose type is not a known value type such as <code>time.Time</code>) is automatically treated as BelongsTo. The foreign key column name on the current table is derived as <code>SchemaNameTransformer(fieldName) + "_id"</code>.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title    </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Author   Author </span><span class="token comment" style=color:#999988;font-style:italic>// FK "author_id" derived on this table</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=explicit-tag-2>Explicit Tag<a href=#explicit-tag-2 class=hash-link aria-label="Direct link to Explicit Tag" title="Direct link to Explicit Tag" translate=no>​</a></h4>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title    </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"title"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Author   Author </span><span class="token string" style=color:#e3116c>`db:"-,belongsTo:author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Table schema</summary><div><div class=collapsibleContent_i85q><p>The database schema is the same as HasMany — BelongsTo is the inverse perspective of the same foreign key column:<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> authors </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    name       </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> posts </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    author_id  </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    title      </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">author_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> authors</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=manytomany>ManyToMany<a href=#manytomany class=hash-link aria-label="Direct link to ManyToMany" title="Direct link to ManyToMany" translate=no>​</a></h3>
<p>A join table is required and <code>many2many:</code> always needs an explicit <code>db</code> tag — ManyToMany relationships cannot be auto-detected.</p>
<p>The join table must have columns referencing the primary key of each side. By default these column names are derived as <code>SchemaNameTransformer(EntityType) + "_id"</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=auto-derived-join-table-name>Auto-derived Join Table Name<a href=#auto-derived-join-table-name class=hash-link aria-label="Direct link to Auto-derived Join Table Name" title="Direct link to Auto-derived Join Table Name" translate=no>​</a></h4>
<p>Leave the <code>many2many:</code> value empty to have the join table name derived automatically from both entity table names, sorted alphabetically and joined with an underscore:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Tags  </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Tag </span><span class="token string" style=color:#e3116c>`db:"-,many2many:"`</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// join table "posts_tags" auto-derived</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Tag </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=explicit-tag-3>Explicit Tag<a href=#explicit-tag-3 class=hash-link aria-label="Direct link to Explicit Tag" title="Direct link to Explicit Tag" translate=no>​</a></h4>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Post </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"title"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Tags  </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Tag  </span><span class="token string" style=color:#e3116c>`db:"-,many2many:posts_tags"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Tag </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Table schema</summary><div><div class=collapsibleContent_i85q><p>Both the auto-derived and explicit variants map to the same schema. The join table column names are derived as <code>SchemaNameTransformer(EntityType) + "_id"</code>:<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> posts </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    title      </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> tags </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    id         </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>AUTO_INCREMENT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    name       </span><span class="token keyword" style=color:#00009f>VARCHAR</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>255</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    created_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    updated_at </span><span class="token keyword" style=color:#00009f>TIMESTAMP</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>DEFAULT</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>ON</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>UPDATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>CURRENT_TIMESTAMP</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> posts_tags </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    post_id </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    tag_id  </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">post_id</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tag_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">post_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tag_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain">  </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> tags</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div></div></details>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=overriding-join-table-column-names>Overriding Join Table Column Names<a href=#overriding-join-table-column-names class=hash-link aria-label="Direct link to Overriding Join Table Column Names" title="Direct link to Overriding Join Table Column Names" translate=no>​</a></h4>
<p>Use <code>parentKey:</code> and <code>relatedKey:</code> to override the join table column names when they differ from the default convention:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Article </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title  </span><span class="token builtin">string</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"title"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Labels </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Label </span><span class="token string" style=color:#e3116c>`db:"-,many2many:article_labels,parentKey:art_id,relatedKey:lbl_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Label </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed=true><summary>Table schema</summary><div><div class=collapsibleContent_i85q><p>The corresponding join table uses abbreviated column names that differ from the default <code>SchemaNameTransformer</code> convention (<code>article_id</code> / <code>label_id</code>):<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>CREATE</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>TABLE</span><span class="token plain"> article_labels </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    art_id </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    lbl_id </span><span class="token keyword" style=color:#00009f>BIGINT</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>NOT</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>NULL</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>PRIMARY</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">art_id</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> lbl_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">art_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> articles</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>FOREIGN</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>KEY</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">lbl_id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>REFERENCES</span><span class="token plain"> labels</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><br/></span></code></pre></div></div></div></div></details>
<table><thead><tr><th>Option<th>Description<tbody><tr><td><code>parentKey:col</code><td>Join table column referencing the <strong>parent</strong> entity's primary key<tr><td><code>relatedKey:col</code><td>Join table column referencing the <strong>related</strong> entity's primary key</table>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> Author </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name     </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"name"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Internal </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"-"`</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// not mapped to any column</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=creating-the-repository>Creating the Repository<a href=#creating-the-repository class=hash-link aria-label="Direct link to Creating the Repository" title="Direct link to Creating the Repository" translate=no>​</a></h2>
<p>Create a repository using <code>sqlr.NewRepository[K, E]()</code> within a gosoline application. The type parameters specify the primary key type and the entity type:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">authorRepo</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">NewRepository</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Author</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> config</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> logger</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"default"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to create author repository: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>The last argument (<code>"default"</code> above) is the <strong>sqlc client name</strong>. It must match a key under the <code>sqlc</code> block in your configuration file — the repository uses that named client for all database operations. You can have multiple repositories pointing to different clients (e.g., <code>"default"</code>, <code>"analytics"</code>, <code>"readonly"</code>) by passing different names.</p>
<p>The <code>Repository</code> interface provides:</p>
<table><thead><tr><th>Method<th>Description<tbody><tr><td><code>Create(ctx, entity)</code><td>Inserts the entity and any populated association fields; sets auto-increment IDs and timestamps<tr><td><code>Read(ctx, id, opts...)</code><td>Loads one entity by primary key, with optional joins/preloads<tr><td><code>Query(ctx, opts...)</code><td>Loads entities matching query conditions<tr><td><code>Update(ctx, entity)</code><td>Updates all fields of the entity<tr><td><code>Delete(ctx, id)</code><td>Deletes the entity by primary key<tr><td><code>Close()</code><td>Releases resources (prepared statements, etc.)</table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=crud-operations>CRUD Operations<a href=#crud-operations class=hash-link aria-label="Direct link to CRUD Operations" title="Direct link to CRUD Operations" translate=no>​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=create>Create<a href=#create class=hash-link aria-label="Direct link to Create" title="Direct link to Create" translate=no>​</a></h3>
<p>Pass a pointer to an entity. Auto-increment IDs and timestamp fields are set automatically:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>createAuthor</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> email </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  author </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">Author</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Name</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">  name</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Email</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> email</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">authorRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Create</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> author</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to create author: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// author.Id is automatically set for auto-increment primary keys</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// author.CreatedAt and author.UpdatedAt are set via autoCreateTime/autoUpdateTime</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=create-with-associations>Create with Associations<a href=#create-with-associations class=hash-link aria-label="Direct link to Create with Associations" title="Direct link to Create with Associations" translate=no>​</a></h3>
<p>Populate relationship fields on the entity before calling <code>Create()</code> and <code>sqlr</code> will automatically persist them in the correct order within a single transaction:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>createPost</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> authorId </span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> title</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> body</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> status </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tags </span><span class="token operator" style=color:#393A34>...</span><span class="token plain">Tag</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  post </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain"> authorId</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">    title</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Body</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">     body</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Status</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">   status</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Tags</span><span class="token punctuation" style=color:#393A34>:</span><span class="token plain">     tags</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// When Tags is populated, sqlr automatically inserts the tag rows and</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// the posts_tags join table entries within a single transaction.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Create</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> post</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to create post: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>The association save order is:</p>
<ol>
<li class=""><strong>BelongsTo</strong> — related entity inserted first so the parent's FK column is set before the parent row is written.</li>
<li class=""><strong>Parent entity</strong> — the base row is inserted.</li>
<li class=""><strong>HasOne / HasMany</strong> — related entities are inserted with their FK pointing to the parent PK.</li>
<li class=""><strong>ManyToMany</strong> — related entities with zero PKs are inserted, then join table rows are created for all of them.</li>
</ol>
<p>Entities with a non-zero primary key are treated as already-persisted: they are skipped for insertion but the FK or join table row is still created. <code>Update</code> and <code>Delete</code> only affect the base entity row and are not association-aware.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=read>Read<a href=#read class=hash-link aria-label="Direct link to Read" title="Direct link to Read" translate=no>​</a></h3>
<p>Load a single entity by its primary key:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>readAuthor</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> id </span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">authorRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Read</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to read author: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=update>Update<a href=#update class=hash-link aria-label="Direct link to Update" title="Direct link to Update" translate=no>​</a></h3>
<p>Modify the entity and pass it to <code>Update()</code>. The <code>UpdatedAt</code> timestamp is refreshed automatically:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>updatePostStatus</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> post </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> status </span><span class="token builtin">string</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  post</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Status </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> status</span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  updated</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Update</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> post</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to update post: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// updated.UpdatedAt is automatically refreshed via autoUpdateTime</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> updated</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=delete>Delete<a href=#delete class=hash-link aria-label="Direct link to Delete" title="Direct link to Delete" translate=no>​</a></h3>
<p>Remove an entity by its primary key. Returns <code>ErrNotFound</code> if the entity doesn't exist:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>deleteTag</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> id </span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">tagRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Delete</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to delete tag: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=query-operations>Query Operations<a href=#query-operations class=hash-link aria-label="Direct link to Query Operations" title="Direct link to Query Operations" translate=no>​</a></h2>
<p>Use <code>Query()</code> with a <code>QueryBuilderSelect</code> to filter, sort, and paginate results:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>queryPublishedPosts</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Query</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderSelect</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"status"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"published"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>OrderBy</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"created_at DESC"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>Limit</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>Offset</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to query posts: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>The <code>QueryBuilderSelect</code> supports:</p>
<table><thead><tr><th>Method<th>Description<tbody><tr><td><code>Where(condition, params...)</code><td>Adds a WHERE condition (multiple calls are ANDed)<tr><td><code>OrderBy(cols...)</code><td>Sets the ORDER BY clause<tr><td><code>Limit(n)</code><td>Limits the number of results<tr><td><code>Offset(n)</code><td>Skips the first n results<tr><td><code>GroupBy(cols...)</code><td>Sets the GROUP BY clause<tr><td><code>Having(condition, params...)</code><td>Adds a HAVING condition</table>
<p>WHERE conditions use the same <code>sqlc.Col()</code> expression API from the <a class="" href=/docs/how-to/databases-sql/sqlc><code>sqlc</code> package</a>:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"status"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"published"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"age"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Gt</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>18</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>And</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"a"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"b"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=eager-loading-with-preload>Eager Loading with Preload<a href=#eager-loading-with-preload class=hash-link aria-label="Direct link to Eager Loading with Preload" title="Direct link to Eager Loading with Preload" translate=no>​</a></h2>
<p>Use <code>Preload()</code> to load related entities in separate queries. Preloads support all relationship types: HasOne, HasMany, BelongsTo, and ManyToMany.</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>queryPostsWithAuthor</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Query</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderSelect</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"status"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"published"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Author"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Tags"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to query posts: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// Each post now has post.Author and post.Tags populated</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=nested-preloads>Nested Preloads<a href=#nested-preloads class=hash-link aria-label="Direct link to Nested Preloads" title="Direct link to Nested Preloads" translate=no>​</a></h3>
<p>Load nested relationships using dot-separated paths. Conditions on nested paths apply to the leaf relation only:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Posts.Comments"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Posts.Comments"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Condition</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"body != ?"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>""</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=auto-preload>Auto-Preload<a href=#auto-preload class=hash-link aria-label="Direct link to Auto-Preload" title="Direct link to Auto-Preload" translate=no>​</a></h3>
<p>Add the <code>preload</code> tag option to a relationship to automatically load it on every Read and Query — without requiring an explicit <code>Preload()</code> call:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>type</span><span class="token plain"> PostWithPreloads </span><span class="token keyword" style=color:#00009f>struct</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Entity</span><span class="token punctuation" style=color:#393A34>[</span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    AuthorID </span><span class="token builtin">int64</span><span class="token plain">  </span><span class="token string" style=color:#e3116c>`db:"author_id"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Title    </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>`db:"title"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Author   Author </span><span class="token string" style=color:#e3116c>`db:"-,belongsTo:author_id,preload"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    Tags     </span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Tag  </span><span class="token string" style=color:#e3116c>`db:"-,many2many:posts_tags,preload"`</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<p>Auto-preloads are recursively discovered across nested relationships and merged with any explicit preloads (explicit preloads take precedence when both are present).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=preload-conditions>Preload Conditions<a href=#preload-conditions class=hash-link aria-label="Direct link to Preload Conditions" title="Direct link to Preload Conditions" translate=no>​</a></h3>
<p>Pass conditions to <code>Preload()</code> to filter which related entities are loaded:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>queryPostsPreloadWithCondition</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Query</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderSelect</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Author"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Preload</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Tags"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Condition</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"name"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>NotEq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>""</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to query posts: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=eager-loading-with-joins>Eager Loading with Joins<a href=#eager-loading-with-joins class=hash-link aria-label="Direct link to Eager Loading with Joins" title="Direct link to Eager Loading with Joins" translate=no>​</a></h2>
<p>Use <code>LeftJoin()</code>, <code>InnerJoin()</code>, <code>RightJoin()</code>, or <code>CrossJoin()</code> to load related entities via SQL JOINs. Joins support HasOne, HasMany, and BelongsTo relationships (ManyToMany and nested paths require <code>Preload</code>).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=joins-on-query>Joins on Query<a href=#joins-on-query class=hash-link aria-label="Direct link to Joins on Query" title="Direct link to Joins on Query" translate=no>​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>queryPostsWithAuthorJoin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Query</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderSelect</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Where</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"status"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"published"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">      </span><span class="token function" style=color:#d73a49>LeftJoin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Author"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to query posts: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token comment" style=color:#999988;font-style:italic>// Each post now has post.Author populated via a SQL JOIN</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=joins-on-read>Joins on Read<a href=#joins-on-read class=hash-link aria-label="Direct link to Joins on Read" title="Direct link to Joins on Read" translate=no>​</a></h3>
<p>Joins can also be used with <code>Read()</code> to load relations alongside a single entity lookup:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>readPostWithAuthor</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> postId </span><span class="token builtin">int64</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Read</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> postId</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderRead</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>LeftJoin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Author"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to read post with author: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=join-conditions>Join Conditions<a href=#join-conditions class=hash-link aria-label="Direct link to Join Conditions" title="Direct link to Join Conditions" translate=no>​</a></h3>
<p>Pass conditions to restrict the joined rows:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockTitle_OeMC>main.go</div><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>func</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">s </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">BlogService</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>queryPostsJoinWithCondition</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx context</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">Context</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain">Post</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> s</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">postRepo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Query</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>func</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">qb </span><span class="token operator" style=color:#393A34>*</span><span class="token plain">sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">QueryBuilderSelect</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    qb</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>LeftJoin</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Author"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Condition</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">sqlc</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Col</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"name"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Eq</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Alice"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> fmt</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Errorf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"failed to query posts: %w"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">  </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> posts</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token boolean" style=color:#36acaa>nil</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id=error-handling>Error Handling<a href=#error-handling class=hash-link aria-label="Direct link to Error Handling" title="Direct link to Error Handling" translate=no>​</a></h2>
<p>The <code>sqlr.ErrNotFound</code> sentinel error is returned when <code>Read()</code> or <code>Delete()</code> cannot find the requested entity:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-go codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">author</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> err </span><span class="token operator" style=color:#393A34>:=</span><span class="token plain"> repo</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Read</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ctx</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> id</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> errors</span><span class="token punctuation" style=color:#393A34>.</span><span class="token function" style=color:#d73a49>Is</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">err</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> sqlr</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">ErrNotFound</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// entity does not exist</span><span class="token plain"></span><br/></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br/></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/gosoline-project/docs/tree/main/docs/how-to/databases-sql/sqlr.mdx target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/docs/how-to/databases-sql/sqlc><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>sqlc - SQL Client</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/docs/how-to/databases-sql/sqlh><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>sqlh - SQL HTTP Handlers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#getting-started class="table-of-contents__link toc-highlight">Getting Started</a><li><a href=#configuration class="table-of-contents__link toc-highlight">Configuration</a><li><a href=#defining-entities class="table-of-contents__link toc-highlight">Defining Entities</a><ul><li><a href=#entity-base-struct class="table-of-contents__link toc-highlight">Entity Base Struct</a><li><a href=#struct-tags class="table-of-contents__link toc-highlight">Struct Tags</a><li><a href=#excluding-fields class="table-of-contents__link toc-highlight">Excluding Fields</a><li><a href=#table-name-derivation class="table-of-contents__link toc-highlight">Table Name Derivation</a><li><a href=#schemanametransformer class="table-of-contents__link toc-highlight">SchemaNameTransformer</a><li><a href=#supported-key-types class="table-of-contents__link toc-highlight">Supported Key Types</a></ul><li><a href=#relationships class="table-of-contents__link toc-highlight">Relationships</a><ul><li><a href=#hasone class="table-of-contents__link toc-highlight">HasOne</a><li><a href=#hasmany class="table-of-contents__link toc-highlight">HasMany</a><li><a href=#belongsto class="table-of-contents__link toc-highlight">BelongsTo</a><li><a href=#manytomany class="table-of-contents__link toc-highlight">ManyToMany</a></ul><li><a href=#creating-the-repository class="table-of-contents__link toc-highlight">Creating the Repository</a><li><a href=#crud-operations class="table-of-contents__link toc-highlight">CRUD Operations</a><ul><li><a href=#create class="table-of-contents__link toc-highlight">Create</a><li><a href=#create-with-associations class="table-of-contents__link toc-highlight">Create with Associations</a><li><a href=#read class="table-of-contents__link toc-highlight">Read</a><li><a href=#update class="table-of-contents__link toc-highlight">Update</a><li><a href=#delete class="table-of-contents__link toc-highlight">Delete</a></ul><li><a href=#query-operations class="table-of-contents__link toc-highlight">Query Operations</a><li><a href=#eager-loading-with-preload class="table-of-contents__link toc-highlight">Eager Loading with Preload</a><ul><li><a href=#nested-preloads class="table-of-contents__link toc-highlight">Nested Preloads</a><li><a href=#auto-preload class="table-of-contents__link toc-highlight">Auto-Preload</a><li><a href=#preload-conditions class="table-of-contents__link toc-highlight">Preload Conditions</a></ul><li><a href=#eager-loading-with-joins class="table-of-contents__link toc-highlight">Eager Loading with Joins</a><ul><li><a href=#joins-on-query class="table-of-contents__link toc-highlight">Joins on Query</a><li><a href=#joins-on-read class="table-of-contents__link toc-highlight">Joins on Read</a><li><a href=#join-conditions class="table-of-contents__link toc-highlight">Join Conditions</a></ul><li><a href=#error-handling class="table-of-contents__link toc-highlight">Error Handling</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Docs</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/docs/>Overview</a><li class=footer__item><a class=footer__link-item href=/docs/category/getting-started>Getting started</a><li class=footer__item><a class=footer__link-item href=/docs/category/how-to-guides>How-to guides</a><li class=footer__item><a class=footer__link-item href=/docs/category/reference>Reference</a><li class=footer__item><a class=footer__link-item href=/docs/blog>Blog</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://github.com/gosoline-project/docs target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=footer__copyright>Copyright © 2026 justtrack</div></div></div></footer></div></body>