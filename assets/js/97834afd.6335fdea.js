"use strict";(self.webpackChunkgosoline_docs=self.webpackChunkgosoline_docs||[]).push([["9748"],{2891(e,n,i){i.r(n),i.d(n,{metadata:()=>s,default:()=>h,frontMatter:()=>l,contentTitle:()=>o,toc:()=>d,assets:()=>a});var s=JSON.parse('{"id":"how-to/databases-sql/index","title":"Working with Relational Databases","description":"The gosoline framework provides three layered packages for working with relational databases, each building on top of the previous one:","source":"@site/docs/how-to/databases-sql/index.mdx","sourceDirName":"how-to/databases-sql","slug":"/how-to/databases-sql/","permalink":"/docs/how-to/databases-sql/","draft":false,"unlisted":false,"editUrl":"https://github.com/gosoline-project/docs/tree/main/docs/how-to/databases-sql/index.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Working with Relational Databases"},"sidebar":"docSidebar","previous":{"title":"Implement a log handler","permalink":"/docs/how-to/logging/implement-a-log-handler"},"next":{"title":"sqlc - SQL Client","permalink":"/docs/how-to/databases-sql/sqlc"}}'),t=i(4848),r=i(8453);let l={sidebar_position:1,title:"Working with Relational Databases"},o="Working with Relational Databases",a={},d=[{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"sqlc - SQL Client",id:"sqlc---sql-client",level:2},{value:"sqlr - SQL Repository",id:"sqlr---sql-repository",level:2},{value:"sqlh - SQL HTTP Handlers",id:"sqlh---sql-http-handlers",level:2},{value:"Choosing the Right Layer",id:"choosing-the-right-layer",level:2}];function c(e){let n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"working-with-relational-databases",children:"Working with Relational Databases"})}),"\n",(0,t.jsx)(n.p,{children:"The gosoline framework provides three layered packages for working with relational databases, each building on top of the previous one:"}),"\n",(0,t.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"sqlh (HTTP Layer)      \u2192 Exposes CRUD operations via HTTP endpoints\n    \u2191\nsqlr (Repository Layer) \u2192 Provides ORM-like experience with entities\n    \u2191\nsqlc (Client Layer)     \u2192 Core database client and query builder\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sqlc---sql-client",children:"sqlc - SQL Client"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"sqlc"})," package is the foundation layer providing direct access to relational databases. It handles connection management, query building, and execution."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When to use sqlc:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You need fine-grained control over SQL queries"}),"\n",(0,t.jsx)(n.li,{children:"Building custom queries with complex joins or aggregations"}),"\n",(0,t.jsx)(n.li,{children:"Working with raw SQL or requiring maximum performance"}),"\n",(0,t.jsx)(n.li,{children:"Implementing custom data access patterns"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key capabilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Database connection management for MySQL and PostgreSQL"}),"\n",(0,t.jsx)(n.li,{children:"Fluent query builder for SELECT, INSERT, UPDATE, DELETE operations"}),"\n",(0,t.jsx)(n.li,{children:"Expression-based WHERE conditions with type-safe operators"}),"\n",(0,t.jsx)(n.li,{children:"Transaction support with automatic rollback on error"}),"\n",(0,t.jsx)(n.li,{children:"Prepared statement caching"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"sqlr---sql-repository",children:"sqlr - SQL Repository"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"sqlr"})," package provides an ORM-like experience built on top of ",(0,t.jsx)(n.code,{children:"sqlc"}),". It uses Go generics to offer type-safe CRUD operations for entities."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When to use sqlr:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You want type-safe entity operations without writing SQL"}),"\n",(0,t.jsx)(n.li,{children:"Working with domain entities that map to database tables"}),"\n",(0,t.jsx)(n.li,{children:"Need automatic handling of timestamps and auto-increment IDs"}),"\n",(0,t.jsx)(n.li,{children:"Loading related entities through relationships"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key capabilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Generic Repository pattern with Create, Read, Update, Delete, Query operations"}),"\n",(0,t.jsx)(n.li,{children:"Entity definition with struct tags for schema mapping"}),"\n",(0,t.jsx)(n.li,{children:"Relationship support: HasOne, HasMany, BelongsTo, ManyToMany"}),"\n",(0,t.jsx)(n.li,{children:"Eager loading via Preload for related entities"}),"\n",(0,t.jsx)(n.li,{children:"Join support for HasOne, HasMany, BelongsTo relations"}),"\n",(0,t.jsx)(n.li,{children:"Transaction-aware repository variant"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"sqlh---sql-http-handlers",children:"sqlh - SQL HTTP Handlers"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"sqlh"})," package exposes repository CRUD operations through HTTP endpoints. It integrates with the gosoline HTTP server."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"When to use sqlh:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Building REST APIs for entity management"}),"\n",(0,t.jsx)(n.li,{children:"Need quick CRUD endpoints without boilerplate"}),"\n",(0,t.jsx)(n.li,{children:"Want consistent API patterns across entities"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key capabilities:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Automatic CRUD handler generation for entities"}),"\n",(0,t.jsx)(n.li,{children:"Transformer pattern for input/output mapping"}),"\n",(0,t.jsx)(n.li,{children:"JSON filter support for query endpoints"}),"\n",(0,t.jsx)(n.li,{children:"Integration with gosoline HTTP server routing"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"choosing-the-right-layer",children:"Choosing the Right Layer"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Need"}),(0,t.jsx)(n.th,{children:"Recommended Layer"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Raw SQL execution, complex queries"}),(0,t.jsx)(n.td,{children:"sqlc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Entity CRUD with relationships"}),(0,t.jsx)(n.td,{children:"sqlr"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"REST API endpoints for entities"}),(0,t.jsx)(n.td,{children:"sqlh"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Performance-critical operations"}),(0,t.jsx)(n.td,{children:"sqlc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Rapid development of CRUD APIs"}),(0,t.jsx)(n.td,{children:"sqlh + sqlr"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Custom business logic"}),(0,t.jsx)(n.td,{children:"sqlr or sqlc"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["You can use multiple layers together within the same application\u2014using ",(0,t.jsx)(n.code,{children:"sqlh"})," for standard CRUD endpoints while leveraging ",(0,t.jsx)(n.code,{children:"sqlc"})," directly for complex reporting queries."]})]})}function h(e={}){let{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>l,x:()=>o});var s=i(6540);let t={},r=s.createContext(t);function l(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);