"use strict";(self.webpackChunkgosoline_docs=self.webpackChunkgosoline_docs||[]).push([["4403"],{9163(e,n,o){o.r(n),o.d(n,{metadata:()=>l,default:()=>p,frontMatter:()=>g,contentTitle:()=>a,toc:()=>c,assets:()=>s});var l=JSON.parse('{"id":"how-to/logging/use-loggers","title":"Use loggers","description":"With gosoline, there are multiple ways to configure and use a logger.","source":"@site/docs/how-to/logging/use-loggers.mdx","sourceDirName":"how-to/logging","slug":"/how-to/logging/use-loggers","permalink":"/docs/how-to/logging/use-loggers","draft":false,"unlisted":false,"editUrl":"https://github.com/gosoline-project/docs/tree/main/docs/how-to/logging/use-loggers.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Use loggers"},"sidebar":"docSidebar","previous":{"title":"Load configurations","permalink":"/docs/how-to/load-configs"},"next":{"title":"Sampling & fingers-crossed","permalink":"/docs/how-to/logging/sampling-and-fingers-crossed"}}'),i=o(4848),t=o(8453),r=o(1113);let g={sidebar_position:2,title:"Use loggers"},a,s={},c=[{value:"Implement a logger directly in code",id:"implement-a-logger-directly-in-code",level:2},{value:"Implement a logger with an app configuration",id:"implement-a-logger-with-an-app-configuration",level:2},{value:"Conclusion",id:"conclusion",level:2}];function d(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"With gosoline, there are multiple ways to configure and use a logger."}),"\n",(0,i.jsx)(n.h2,{id:"implement-a-logger-directly-in-code",children:"Implement a logger directly in code"}),"\n",(0,i.jsx)(n.p,{children:"One way to implement a logger is using log functions, without appealing to an external configuration:"}),"\n",(0,i.jsx)(r.A,{showLineNumbers:!0,language:"go",title:"main.go",children:'package main\n\nimport (\n	"context"\n	"os"\n\n	// 1\n	"github.com/justtrackio/gosoline/pkg/cfg"\n	"github.com/justtrackio/gosoline/pkg/log"\n)\n\nfunc main() {\n	ctx := context.Background()\n	// 2\n	logHandler := log.NewHandlerIoWriter(\n		cfg.New(), log.PriorityInfo, log.FormatterConsole, "main", "15:04:05.000", os.Stdout,\n	)\n\n	// 3\n	loggerOptions := []log.Option{log.WithHandlers(logHandler)}\n\n	// 4\n	logger := log.NewLogger()\n\n	// 5\n	if err := logger.Option(loggerOptions...); err != nil {\n		logger.Error(ctx, "Failed to apply logger options: %w", err)\n		os.Exit(1)\n	}\n\n	logger.Info(ctx, "Message")\n}\n'}),"\n",(0,i.jsx)(n.p,{children:"Here, you:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Import the ",(0,i.jsx)(n.code,{children:"cfg"})," package."]}),"\n",(0,i.jsx)(n.li,{children:"Create a new handler for sending logs to STDOUT."}),"\n",(0,i.jsx)(n.li,{children:"Create a log option that includes your handler."}),"\n",(0,i.jsx)(n.li,{children:"Create your logger."}),"\n",(0,i.jsx)(n.li,{children:"Apply the options."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"implement-a-logger-with-an-app-configuration",children:"Implement a logger with an app configuration"}),"\n",(0,i.jsx)(n.p,{children:"If you have an application, you can create a logger from your app's configuration."}),"\n",(0,i.jsx)(n.p,{children:"First, configure your logger in your configuration. For example, in a config file:"}),"\n",(0,i.jsx)(r.A,{showLineNumbers:!0,language:"yml",title:"config.dist.yml",children:'app:\n  env: dev\n  name: hello-world\n  namespace: "{app.tags.project}.{app.env}.{app.tags.family}.{app.tags.group}"\n  tags:\n    project: gosoline\n    family: get-started\n    group: grp\n\n// highlight-start\nlog:\n    level: info\n    handlers:\n        main:\n            type: iowriter\n            channels:\n                metrics:\n                    level: error\n                http:\n                    level: error\n            formatter: console\n            level: info\n            timestamp_format: 15:04:05.000\n            writer: stdout\n// highlight-end\n'}),"\n",(0,i.jsx)(n.p,{children:"Then, implement your logger alongside your application:"}),"\n",(0,i.jsx)(r.A,{showLineNumbers:!0,language:"go",title:"main.go",children:'package main\n\nimport (\n	"context"\n\n	"github.com/justtrackio/gosoline/pkg/application"\n	"github.com/justtrackio/gosoline/pkg/cfg"\n	"github.com/justtrackio/gosoline/pkg/kernel"\n	"github.com/justtrackio/gosoline/pkg/log"\n)\n\nfunc NewHelloWorldModule(ctx context.Context, config cfg.Config, logger log.Logger) (kernel.Module, error) {\n	return &HelloWorldModule{\n		// highlight-next-line\n		logger: logger.WithChannel("hello-world"),\n	}, nil\n}\n\ntype HelloWorldModule struct {\n	// highlight-next-line\n	logger log.Logger\n}\n\nfunc (h HelloWorldModule) Run(ctx context.Context) error {\n	// highlight-next-line\n	h.logger.Info(ctx, "Hello World")\n\n	return nil\n}\n\nfunc main() {\n	application.Run(\n		application.WithConfigFile("config.dist.yml", "yml"),\n		application.WithModuleFactory("hello-world", NewHelloWorldModule),\n	)\n}\n'}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(n.p,{children:"In this guide, you've learned multiple ways to implement a logger with gosoline."}),"\n",(0,i.jsx)(n.p,{children:"Check out these resources to learn more about logging with gosoline:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/how-to/logging/implement-a-log-handler",children:"Implement a log handler"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"/reference/package-log",children:"API reference for the log package"})}),"\n"]})]})}function p(e={}){let{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);